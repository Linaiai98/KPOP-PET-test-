<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>äººè®¾ä¸äº’åŠ¨é›†æˆæµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #2b2d31;
            color: #dcddde;
        }
        .test-section {
            background: #36393f;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            border: 1px solid #444;
        }
        .test-section h3 {
            color: #7289da;
            margin-top: 0;
        }
        select, input, textarea, button {
            width: 100%;
            padding: 8px;
            margin: 5px 0;
            background: #40444b;
            color: #dcddde;
            border: 1px solid #555;
            border-radius: 4px;
        }
        button {
            background: #7289da;
            cursor: pointer;
            width: auto;
            padding: 10px 20px;
        }
        button:hover {
            background: #5b6eae;
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
            font-weight: bold;
        }
        .success { background: #43b581; color: white; }
        .error { background: #f04747; color: white; }
        .info { background: #7289da; color: white; }
        .hidden { display: none; }
    </style>
</head>
<body>
    <h1>ğŸ­ äººè®¾ä¸äº’åŠ¨é›†æˆæµ‹è¯•</h1>
    <p>æµ‹è¯•æ–°çš„äººè®¾é€‰æ‹©å’Œè§’è‰²å¡é›†æˆåŠŸèƒ½</p>

    <div class="test-section">
        <h3>ğŸ­ äººè®¾é€‰æ‹©æµ‹è¯•</h3>
        
        <label>äººè®¾ç±»å‹ï¼š</label>
        <select id="personality-type">
            <option value="default">ğŸ± é»˜è®¤ - é«˜å†·ä½†æ¸©æŸ”çš„çŒ«</option>
            <option value="cheerful">ğŸ¶ æ´»æ³¼ - çƒ­æƒ…æ´‹æº¢çš„å°ç‹—</option>
            <option value="elegant">ğŸ‰ ä¼˜é›… - å¤å…¸æ–‡é›…çš„é¾™</option>
            <option value="shy">ğŸ° å®³ç¾ - è½»å£°ç»†è¯­çš„å…”å­</option>
            <option value="smart">ğŸ¦ èªæ˜ - æœºæ™ºå¹½é»˜çš„é¸Ÿ</option>
            <option value="character">ğŸ“‹ ä½¿ç”¨è§’è‰²å¡äººè®¾</option>
            <option value="custom">âœï¸ è‡ªå®šä¹‰äººè®¾</option>
        </select>

        <!-- è§’è‰²å¡é€‰æ‹©å®¹å™¨ -->
        <div id="character-container" class="hidden">
            <label>é€‰æ‹©è§’è‰²å¡ï¼š</label>
            <div style="display: flex; gap: 8px;">
                <select id="character-select" style="flex: 1;">
                    <option value="">è¯·é€‰æ‹©è§’è‰²å¡...</option>
                    <option value="test-char-1">æµ‹è¯•è§’è‰²1 - å‹‡æ•¢çš„æˆ˜å£«</option>
                    <option value="test-char-2">æµ‹è¯•è§’è‰²2 - æ™ºæ…§çš„æ³•å¸ˆ</option>
                    <option value="test-char-3">æµ‹è¯•è§’è‰²3 - æ¸©æŸ”çš„æ²»ç–—å¸ˆ</option>
                </select>
                <button onclick="refreshCharacters()" style="width: auto;">ğŸ”„ åˆ·æ–°</button>
            </div>
        </div>

        <!-- è‡ªå®šä¹‰äººè®¾å®¹å™¨ -->
        <div id="custom-container" class="hidden">
            <label>è‡ªå®šä¹‰äººè®¾æè¿°ï¼š</label>
            <textarea id="custom-personality" rows="3" placeholder="æè¿°ä½ çš„å® ç‰©æ€§æ ¼ã€å–œå¥½å’Œç‰¹ç‚¹..."></textarea>
        </div>

        <button onclick="testPersonalityChange()">æµ‹è¯•äººè®¾åˆ‡æ¢</button>
        <div id="personality-status" class="status info">è¯·é€‰æ‹©äººè®¾ç±»å‹</div>
    </div>

    <div class="test-section">
        <h3>ğŸ¤– AI API é…ç½®æµ‹è¯•</h3>
        
        <label>APIç±»å‹ï¼š</label>
        <select id="api-type">
            <option value="">è¯·é€‰æ‹©APIç±»å‹...</option>
            <option value="openai">OpenAI (ChatGPT)</option>
            <option value="claude">Claude (Anthropic)</option>
            <option value="google">Google AI Studio</option>
            <option value="custom">è‡ªå®šä¹‰API</option>
        </select>

        <!-- APIé…ç½®å®¹å™¨ -->
        <div id="api-config-container" class="hidden">
            <label>API URL:</label>
            <input type="text" id="api-url" placeholder="ä¾‹å¦‚: https://api.openai.com/v1">
            
            <label>API Key:</label>
            <input type="password" id="api-key" placeholder="è¾“å…¥ä½ çš„APIå¯†é’¥">
            
            <label>æ¨¡å‹åç§°:</label>
            <input type="text" id="api-model" placeholder="ä¾‹å¦‚: gpt-4, claude-3-sonnet">
        </div>

        <button onclick="testAPIConfig()">æµ‹è¯•APIé…ç½®</button>
        <div id="api-status" class="status info">è¯·é…ç½®API</div>
    </div>

    <div class="test-section">
        <h3>ğŸ”— é›†æˆæµ‹è¯•</h3>
        <button onclick="testIntegration()">æµ‹è¯•äººè®¾ä¸äº’åŠ¨é›†æˆ</button>
        <div id="integration-status" class="status info">ç­‰å¾…æµ‹è¯•</div>
        
        <div id="test-results" style="margin-top: 20px;">
            <h4>æµ‹è¯•ç»“æœï¼š</h4>
            <pre id="results-output" style="background: #2b2d31; padding: 10px; border-radius: 4px; white-space: pre-wrap;"></pre>
        </div>
    </div>

    <script>
        // æ¨¡æ‹Ÿäººè®¾æ•°æ®
        const PRESET_PERSONALITIES = {
            default: "æˆ‘æ˜¯ä¸€åªé«˜å†·ä½†å†…å¿ƒæ¸©æŸ”çš„çŒ«å’ªï¼Œå–œæ¬¢å®‰é™çš„ç¯å¢ƒï¼Œä½†ä¹Ÿä¼šåœ¨ä¸»äººéœ€è¦æ—¶ç»™äºˆæ¸©æš–çš„é™ªä¼´ã€‚",
            cheerful: "æˆ‘æ˜¯ä¸€åªæ´»æ³¼å¼€æœ—çš„å°ç‹—ï¼Œæ€»æ˜¯å……æ»¡æ´»åŠ›ï¼Œå–œæ¬¢å’Œä¸»äººä¸€èµ·ç©è€ï¼Œæ¯å¤©éƒ½å¾ˆå¼€å¿ƒï¼",
            elegant: "æˆ‘æ˜¯ä¸€æ¡ä¼˜é›…é«˜è´µçš„é¾™ï¼Œæ‹¥æœ‰å¤è€çš„æ™ºæ…§å’Œæ–‡é›…çš„ä¸¾æ­¢ï¼Œè¯´è¯æ€»æ˜¯å¾ˆæœ‰è¯—æ„ã€‚",
            shy: "æˆ‘æ˜¯ä¸€åªå®³ç¾çš„å°å…”å­ï¼Œè¯´è¯è½»å£°ç»†è¯­ï¼Œå®¹æ˜“è„¸çº¢ï¼Œä½†å¯¹ä¸»äººå¾ˆä¾æ‹ã€‚",
            smart: "æˆ‘æ˜¯ä¸€åªèªæ˜æœºæ™ºçš„å°é¸Ÿï¼Œå–œæ¬¢æ€è€ƒé—®é¢˜ï¼Œç»å¸¸ä¼šè¯´ä¸€äº›å¹½é»˜çš„è¯æ¥é€—ä¸»äººå¼€å¿ƒã€‚"
        };

        // æ¨¡æ‹Ÿè§’è‰²å¡æ•°æ®
        const TEST_CHARACTERS = {
            'test-char-1': 'æˆ‘æ˜¯ä¸€åå‹‡æ•¢çš„æˆ˜å£«ï¼Œæ°¸è¿œä¸ä¼šé€€ç¼©ï¼Œä¼šä¿æŠ¤æˆ‘çè§†çš„äººã€‚',
            'test-char-2': 'æˆ‘æ˜¯ä¸€ä½æ™ºæ…§çš„æ³•å¸ˆï¼Œå–œæ¬¢ç ”ç©¶é­”æ³•å’Œå¤è€çš„çŸ¥è¯†ã€‚',
            'test-char-3': 'æˆ‘æ˜¯ä¸€åæ¸©æŸ”çš„æ²»ç–—å¸ˆï¼Œæ€»æ˜¯å…³å¿ƒä»–äººçš„å¥åº·å’Œå¹¸ç¦ã€‚'
        };

        // äººè®¾ç±»å‹åˆ‡æ¢
        document.getElementById('personality-type').addEventListener('change', function() {
            const type = this.value;
            const characterContainer = document.getElementById('character-container');
            const customContainer = document.getElementById('custom-container');
            
            // éšè—æ‰€æœ‰å®¹å™¨
            characterContainer.classList.add('hidden');
            customContainer.classList.add('hidden');
            
            // æ ¹æ®ç±»å‹æ˜¾ç¤ºç›¸åº”å®¹å™¨
            if (type === 'character') {
                characterContainer.classList.remove('hidden');
            } else if (type === 'custom') {
                customContainer.classList.remove('hidden');
            }
            
            updatePersonalityStatus();
        });

        // APIç±»å‹åˆ‡æ¢
        document.getElementById('api-type').addEventListener('change', function() {
            const type = this.value;
            const configContainer = document.getElementById('api-config-container');
            
            if (type && type !== '') {
                configContainer.classList.remove('hidden');
                
                // è®¾ç½®é»˜è®¤å€¼
                const defaults = {
                    'openai': { url: 'https://api.openai.com/v1', model: 'gpt-4' },
                    'claude': { url: 'https://api.anthropic.com', model: 'claude-3-sonnet-20240229' },
                    'google': { url: 'https://generativelanguage.googleapis.com/v1beta', model: 'gemini-pro' }
                };
                
                if (defaults[type]) {
                    document.getElementById('api-url').value = defaults[type].url;
                    document.getElementById('api-model').value = defaults[type].model;
                }
            } else {
                configContainer.classList.add('hidden');
            }
        });

        function updatePersonalityStatus() {
            const type = document.getElementById('personality-type').value;
            const status = document.getElementById('personality-status');
            
            let personality = '';
            if (type === 'custom') {
                personality = document.getElementById('custom-personality').value || 'è¯·è¾“å…¥è‡ªå®šä¹‰äººè®¾';
            } else if (type === 'character') {
                const charId = document.getElementById('character-select').value;
                personality = charId ? TEST_CHARACTERS[charId] : 'è¯·é€‰æ‹©è§’è‰²å¡';
            } else {
                personality = PRESET_PERSONALITIES[type] || 'æœªçŸ¥äººè®¾';
            }
            
            status.className = 'status info';
            status.textContent = `å½“å‰äººè®¾: ${personality}`;
        }

        function testPersonalityChange() {
            updatePersonalityStatus();
            const status = document.getElementById('personality-status');
            status.className = 'status success';
            status.textContent = 'âœ… äººè®¾åˆ‡æ¢æµ‹è¯•æˆåŠŸï¼' + status.textContent.substring(4);
        }

        function testAPIConfig() {
            const apiType = document.getElementById('api-type').value;
            const status = document.getElementById('api-status');
            
            if (!apiType) {
                status.className = 'status error';
                status.textContent = 'âŒ è¯·å…ˆé€‰æ‹©APIç±»å‹';
                return;
            }
            
            const apiUrl = document.getElementById('api-url').value;
            const apiKey = document.getElementById('api-key').value;
            
            if (!apiUrl || !apiKey) {
                status.className = 'status error';
                status.textContent = 'âŒ è¯·å¡«å†™å®Œæ•´çš„APIé…ç½®';
                return;
            }
            
            status.className = 'status success';
            status.textContent = `âœ… APIé…ç½®éªŒè¯æˆåŠŸï¼ç±»å‹: ${apiType}`;
        }

        function refreshCharacters() {
            const select = document.getElementById('character-select');
            const button = event.target;
            
            button.textContent = 'ğŸ”„ åŠ è½½ä¸­...';
            button.disabled = true;
            
            setTimeout(() => {
                button.textContent = 'ğŸ”„ åˆ·æ–°';
                button.disabled = false;
                
                const status = document.getElementById('personality-status');
                status.className = 'status success';
                status.textContent = 'âœ… è§’è‰²å¡åˆ—è¡¨å·²åˆ·æ–°';
            }, 1000);
        }

        function testIntegration() {
            const personalityType = document.getElementById('personality-type').value;
            const apiType = document.getElementById('api-type').value;
            const status = document.getElementById('integration-status');
            const output = document.getElementById('results-output');
            
            const results = {
                timestamp: new Date().toLocaleString(),
                personalityType: personalityType,
                apiType: apiType,
                personalityContent: '',
                apiConfig: {},
                integrationStatus: 'success'
            };
            
            // è·å–äººè®¾å†…å®¹
            if (personalityType === 'custom') {
                results.personalityContent = document.getElementById('custom-personality').value;
            } else if (personalityType === 'character') {
                const charId = document.getElementById('character-select').value;
                results.personalityContent = TEST_CHARACTERS[charId] || '';
            } else {
                results.personalityContent = PRESET_PERSONALITIES[personalityType] || '';
            }
            
            // è·å–APIé…ç½®
            if (apiType) {
                results.apiConfig = {
                    type: apiType,
                    url: document.getElementById('api-url').value,
                    model: document.getElementById('api-model').value,
                    hasKey: !!document.getElementById('api-key').value
                };
            }
            
            // éªŒè¯é›†æˆ
            if (!results.personalityContent) {
                results.integrationStatus = 'error';
                results.error = 'äººè®¾å†…å®¹ä¸ºç©º';
            } else if (!apiType) {
                results.integrationStatus = 'warning';
                results.warning = 'APIæœªé…ç½®ï¼Œå°†ä½¿ç”¨é»˜è®¤å›å¤';
            }
            
            // æ˜¾ç¤ºç»“æœ
            output.textContent = JSON.stringify(results, null, 2);
            
            if (results.integrationStatus === 'success') {
                status.className = 'status success';
                status.textContent = 'âœ… äººè®¾ä¸äº’åŠ¨é›†æˆæµ‹è¯•æˆåŠŸï¼';
            } else if (results.integrationStatus === 'warning') {
                status.className = 'status info';
                status.textContent = 'âš ï¸ é›†æˆæµ‹è¯•å®Œæˆï¼Œä½†æœ‰è­¦å‘Š';
            } else {
                status.className = 'status error';
                status.textContent = 'âŒ é›†æˆæµ‹è¯•å¤±è´¥';
            }
        }

        // åˆå§‹åŒ–
        updatePersonalityStatus();
    </script>
</body>
</html>
