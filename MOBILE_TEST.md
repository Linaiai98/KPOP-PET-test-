# 移动端测试指南

## 🔧 已修复的问题

### 1. UI超出屏幕问题
- ✅ 调整了弹窗尺寸，移动端最大宽度为 `calc(100vw - 10px)`
- ✅ 设置了合适的最大高度 `calc(100vh - 20vh)`
- ✅ 添加了适当的内边距防止贴边
- ✅ 弹窗从顶部10%开始显示，避免被状态栏遮挡

### 2. 弹窗可拖拽功能
- ✅ 添加了标题栏，可以通过拖拽标题栏移动弹窗
- ✅ 支持鼠标和触摸拖拽
- ✅ 拖拽时会限制在屏幕范围内
- ✅ 拖拽过程中有视觉反馈

### 3. 尺寸优化
- ✅ 桌面端：380x480px（更紧凑）
- ✅ 移动端：自适应宽度，最大高度限制
- ✅ 按钮和文字大小针对移动端优化

## 📱 移动端测试清单

### 基础显示测试
- [ ] 弹窗完全显示在屏幕内，没有超出
- [ ] 所有内容都可见，没有被截断
- [ ] 文字大小合适，易于阅读
- [ ] 按钮大小足够，易于点击

### 拖拽功能测试
- [ ] 可以通过标题栏拖拽弹窗
- [ ] 拖拽时弹窗跟随手指/鼠标移动
- [ ] 拖拽不会超出屏幕边界
- [ ] 拖拽结束后弹窗停留在新位置

### 交互测试
- [ ] 关闭按钮正常工作
- [ ] 点击弹窗外部可以关闭
- [ ] 所有按钮都有触摸反馈
- [ ] 滚动功能正常（如果内容超出）

### 不同屏幕尺寸测试
- [ ] 手机竖屏（375x667）
- [ ] 手机横屏（667x375）
- [ ] 平板竖屏（768x1024）
- [ ] 平板横屏（1024x768）
- [ ] 小屏手机（320x568）

## 🧪 快速测试方法

### 方法1：浏览器开发者工具
1. 打开SillyTavern
2. 按F12打开开发者工具
3. 点击设备模拟图标（📱）
4. 选择不同设备进行测试

### 方法2：手动调整窗口
1. 将浏览器窗口调整为移动端尺寸
2. 测试弹窗显示和拖拽功能

### 方法3：实际移动设备
1. 在手机或平板上打开SillyTavern
2. 测试所有功能

## 🔍 问题排查

### 如果弹窗仍然超出屏幕：
1. 检查CSS是否正确加载
2. 确认没有其他CSS冲突
3. 在控制台运行：
```javascript
// 检查弹窗尺寸
const popup = $('#virtual-pet-popup');
console.log('弹窗尺寸:', popup.width(), 'x', popup.height());
console.log('屏幕尺寸:', window.innerWidth, 'x', window.innerHeight);
```

### 如果拖拽功能不工作：
1. 检查是否有JavaScript错误
2. 确认标题栏元素存在：
```javascript
console.log('标题栏元素:', $('.pet-popup-header').length);
```

### 如果按钮太小难以点击：
1. 检查CSS中的最小触摸区域设置
2. 确认按钮有足够的padding

## 📋 测试结果记录

### 设备测试结果
| 设备类型 | 屏幕尺寸 | 显示正常 | 拖拽正常 | 交互正常 | 备注 |
|---------|---------|---------|---------|---------|------|
| iPhone SE | 375x667 | ⬜ | ⬜ | ⬜ | |
| iPhone 12 | 390x844 | ⬜ | ⬜ | ⬜ | |
| iPad | 768x1024 | ⬜ | ⬜ | ⬜ | |
| Android | 360x640 | ⬜ | ⬜ | ⬜ | |

### 功能测试结果
- [ ] 弹窗尺寸适配正常
- [ ] 拖拽功能正常
- [ ] 触摸交互正常
- [ ] 关闭功能正常
- [ ] 内容滚动正常

## 🚀 使用说明

### 拖拽弹窗
1. 点击🐾按钮打开弹窗
2. 按住标题栏（"🐾 虚拟宠物"区域）
3. 拖拽到想要的位置
4. 松开即可

### 最佳实践
- 在移动端建议将弹窗拖拽到屏幕中央
- 避免将弹窗拖拽到屏幕边缘
- 如果弹窗位置不理想，可以重新拖拽调整

## 📞 反馈问题

如果在移动端使用中遇到问题，请提供：
1. 设备型号和屏幕尺寸
2. 浏览器类型和版本
3. 具体的问题描述
4. 控制台错误信息（如果有）
5. 问题截图或录屏
