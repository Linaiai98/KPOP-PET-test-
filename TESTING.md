# 虚拟宠物系统 - 测试指南

## 🧪 测试环境要求

- SillyTavern 最新版本
- 现代浏览器（Chrome、Firefox、Safari、Edge）
- 支持localStorage的浏览器环境

## 📋 功能测试清单

### 1. 基础安装测试

- [ ] 插件文件正确放置在 `scripts/extensions/third-party/virtual-pet-system/` 目录
- [ ] SillyTavern 启动时无控制台错误
- [ ] 扩展设置页面显示"虚拟宠物系统"选项
- [ ] 启用插件后屏幕上出现🐾浮动按钮

### 2. 悬浮窗功能测试

#### 浮动按钮测试
- [ ] 浮动按钮在屏幕上正确显示
- [ ] 按钮可以拖拽移动
- [ ] 拖拽后位置会被保存
- [ ] 点击按钮打开宠物界面
- [ ] 拖拽时不会触发点击事件

#### 弹窗界面测试
- [ ] 弹窗正确居中显示
- [ ] 关闭按钮(×)正常工作
- [ ] 点击弹窗外部区域关闭弹窗
- [ ] 弹窗内容不会因点击而关闭

### 3. 宠物系统功能测试

#### 宠物状态显示
- [ ] 宠物头像正确显示（默认🐱）
- [ ] 宠物名称显示（默认"小宠物"）
- [ ] 等级显示（默认Lv.1）
- [ ] 四个状态条正确显示：
  - [ ] 健康（绿色）
  - [ ] 快乐（黄色）
  - [ ] 饥饿（红色）
  - [ ] 精力（蓝色）

#### 互动功能测试
- [ ] **喂食按钮**：
  - [ ] 点击后增加饥饿值和快乐度
  - [ ] 显示成功提示消息
  - [ ] 30秒冷却时间生效
  - [ ] 冷却期间显示警告消息
  - [ ] 获得经验值

- [ ] **玩耍按钮**：
  - [ ] 点击后增加快乐度，减少精力
  - [ ] 显示成功提示消息
  - [ ] 1分钟冷却时间生效
  - [ ] 获得更多经验值

- [ ] **休息按钮**：
  - [ ] 点击后增加精力和健康
  - [ ] 显示成功提示消息
  - [ ] 2分钟冷却时间生效
  - [ ] 获得经验值

#### 等级系统测试
- [ ] 经验值累积正常
- [ ] 达到100经验值时升级
- [ ] 升级时显示庆祝消息
- [ ] 升级后健康值恢复满值
- [ ] 等级显示正确更新

### 4. 详情页面测试

- [ ] 点击"详细信息"按钮进入详情页
- [ ] 显示宠物基本信息：
  - [ ] 名称
  - [ ] 类型
  - [ ] 等级
  - [ ] 经验值进度
  - [ ] 创建时间
- [ ] 成就系统显示：
  - [ ] 初次喂食成就
  - [ ] 游戏达人成就
  - [ ] 升级专家成就
- [ ] 返回按钮正常工作

### 5. 设置页面测试

- [ ] 点击"设置"按钮进入设置页
- [ ] 宠物名称输入框：
  - [ ] 显示当前名称
  - [ ] 可以修改名称
  - [ ] 保存后生效
- [ ] 宠物类型选择：
  - [ ] 显示当前类型
  - [ ] 可以切换类型（猫、狗、龙、兔子、鸟）
  - [ ] 保存后头像更新
- [ ] 设置选项：
  - [ ] 自动保存开关
  - [ ] 通知提醒开关
- [ ] 重置宠物功能：
  - [ ] 显示确认对话框
  - [ ] 确认后重置所有数据
- [ ] 返回按钮正常工作

### 6. 数据持久化测试

- [ ] 宠物数据自动保存到localStorage
- [ ] 刷新页面后数据保持
- [ ] 重启浏览器后数据保持
- [ ] 按钮位置保存和恢复

### 7. 时间系统测试

- [ ] 宠物状态随时间自然下降：
  - [ ] 饥饿值每小时下降约2点
  - [ ] 精力值每小时下降约1.5点
- [ ] 低状态影响其他属性：
  - [ ] 饥饿<20时健康和快乐下降
  - [ ] 精力<20时快乐下降
- [ ] 页面切换回来时状态更新

### 8. 通知系统测试

- [ ] 启用通知时低状态会提醒：
  - [ ] 健康<30时提醒
  - [ ] 饥饿<20时提醒
  - [ ] 快乐<30时提醒
  - [ ] 精力<20时提醒
- [ ] 通知频率限制（10分钟间隔）
- [ ] 禁用通知时不显示提醒

### 9. 移动端测试

#### 触摸操作
- [ ] 浮动按钮触摸响应正常
- [ ] 按钮拖拽在触摸设备上正常
- [ ] 所有按钮触摸区域足够大
- [ ] 触摸反馈正常

#### 响应式布局
- [ ] 弹窗在小屏幕上正确缩放
- [ ] 按钮布局在移动端合理
- [ ] 文字大小在移动端可读
- [ ] 状态条在小屏幕上正常显示

### 10. 兼容性测试

- [ ] 与其他SillyTavern扩展兼容
- [ ] 不影响主界面功能
- [ ] 控制台无错误信息
- [ ] 内存使用合理

## 🐛 常见问题排查

### 插件不显示
1. 检查文件路径是否正确
2. 检查manifest.json格式
3. 查看浏览器控制台错误

### 浮动按钮不出现
1. 确认插件已启用
2. 检查CSS文件是否加载
3. 查看z-index冲突

### 数据不保存
1. 检查localStorage是否可用
2. 确认浏览器隐私设置
3. 查看存储空间限制

### 移动端问题
1. 检查触摸事件绑定
2. 确认CSS媒体查询
3. 测试不同设备尺寸

## 📊 性能测试

- [ ] 插件加载时间<1秒
- [ ] 内存使用<10MB
- [ ] CPU使用率正常
- [ ] 不影响SillyTavern响应速度

## ✅ 测试完成标准

所有核心功能测试通过，移动端和桌面端都能正常使用，无严重bug和性能问题。
